story:
  id: "5.2"
  epic: "Epic 5 - Referrals & Admin"
  title: "Admin credential verification queue"
  priority: "P0"
  estimatedHours: 6

userStory: |
  As an admin
  I want to review and verify therapist credential uploads
  So that therapist profiles reflect verified documents

tasks:
  - id: "5.2.1"
    description: "Add admin credential queue data helpers (list + update status with verification metadata)"
    files: ["src/lib/credentials.ts"]
  - id: "5.2.2"
    description: "Build admin credential queue page with approve/reject actions"
    files: ["src/app/(admin)/credentials/page.tsx"]
  - id: "5.2.3"
    description: "Update therapist insurance status on insurance credential approval or rejection"
    files: ["src/lib/credentials.ts"]

acceptanceCriteria:
  - "Admin can view credential uploads with therapist name, email, document type, and submission date"
  - "Pending credentials show approve and reject actions"
  - "Approving or rejecting sets credential status plus verifiedBy and verifiedAt"
  - "Insurance credentials update therapist_profile.insurance_status to verified or rejected"
  - "Page is admin-protected and RTL with Hebrew UI copy"

technicalSpecs:
  data:
    - "Join credential -> therapist_profile -> user for queue display"
    - "Only pending credentials can be approved or rejected"
    - "Record verifiedBy (admin user id) and verifiedAt timestamp"
  ui:
    - "Route: /credentials (src/app/(admin)/credentials/page.tsx)"
    - "Show status badge for each credential"
  dependencies:
    - "credential table exists"
    - "therapist_profile and user tables exist"

tests:
  - "Type check passes"

definitionOfDone:
  - "[ ] Admin queue page added"
  - "[ ] Credentials update flow implemented"
  - "[ ] Therapist profile status updated for insurance credentials"
  - "[ ] Story marked complete"

status:
  created: true
  implemented: true
  qa: "pass"
  notes:
    - "Tests not run in this environment."
    - "QA review complete; no blocking issues found."
